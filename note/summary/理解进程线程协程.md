# 1.2 理解进程，线程，协程

**为了使多个程序能够并发**（同一时刻只有一个在运行，时间维度稍微拉长，就会感觉起来像多个同时运行）便有了这个在操作系统中能够独立运行并作为**资源分配的基本单位**。

进程是资源分配的基本单位，进程的调度涉及到的内容比较多（存储空间，CPU，I/O资源等，进程现场保护），**调度开销较大**，在并发的切换过程效率较低。为了更高效的进行调度，提出了比进程更轻量的独立运行和调度的基本单位**线程**。最主要的一点**同一个进程的多个线程共享进程的资源**，这就会暴露出一个多线程编程中需要加入多线程的**锁机制来控制资源的互斥性**（同时写变量冲突）。线程调度能大幅度减小调度的成本（相对于进程来说），线程的切换不会引起进程的切换，但是毕竟还是有成本。

面对着线程相关的问题，出现了**协程**。协程是用户模式下的**轻量级线程**，**操作系统内核对协程一无所知**，协程的调度**完全有应用程序来控制**，操作系统不管这部分的调度。

协程的特点在于是**一个线程执行**，因此最大的优势就是协程极高的执行效率。因为子程序切换不是线程切换，而是由程序自身控制，因此，没有线程切换的开销，和多线程比，线程数量越多，协程的性能优势就越明显。第二大优势就是不需要多线程的锁机制，因为只有一个线程，就也不存在同时写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

依据上述概念本身我们可能可以得出一种暂时性的结论：**考虑到利用多核CPU，并且充分发挥协程的高效率，又可获得极高的性能，面向开发人员最简单的方法是多进程+协程，既充分利用多核**

在Node中利用多核CPU的子进程[文档](http://nodejs.cn/api/child_process.html)