# 1.2 回调函数问题

在Node中每一个异步的IO回调函数并不是由开发人员所控制主动执行的。

#### 那么对于Node的异步IO，在我们最常使用的异步回调的形式下，我们发出调用到回调函数执行这中间发生了什么？

整个过程可简单的抽象成四个基本要素：**IO线程池**，**观察者**，**请求对象**，以及**事件循环**，盗用《深入浅出NodeJS》的Windows借用IOCP实现异步回调过程的一张图片：

![异步回调实现过程](https://user-images.githubusercontent.com/22891804/36887448-40595a64-1e2c-11e8-8366-7a646a26f507.png)

其中所要执行的异步回调函数以及相关的所有状态参数会被封装成一个**请求对象**然后被推入到**IO线程池**中，当操作系统执行完IO得到结果之后会将数据放入请求对象中，并归还当前线程至线程池，通知IOCP完成了IO过程，然后**事件循环**从**IO观察者**中得到已经可以执行的请求对象中的回调，灌注IO数据结果开始执行。

Node本身是多线程的，开发人员的JS代码单线程化身为一个老板，实现高效的异步逻辑依靠的是Node机制内部的各个线程池，模拟出了一个异步非阻塞的特点。**呈现在开发人员面前的是表现形式为各种各样的`callback`组成的一个原生编程风格**。